{"ast":null,"code":"var _jsxFileName = \"E:\\\\Ahmed\\\\web\\\\github\\\\React-redux\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport Cart from './components/Cart/Cart';\nimport React from 'react';\nimport { useEffect } from 'react';\nimport Layout from './components/Layout/Layout';\nimport Products from './components/Shop/Products';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Notification from './components/UI/Notification';\nimport { showCartActions } from './components/store/showCart-Slice';\nimport { dataCartActions } from './components/store/cartData-Slice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet send = true;\n\nfunction App() {\n  _s();\n\n  const showCart = useSelector(state => state.showCart.showCart);\n  const showNotification = useSelector(state => state.showCart.notification);\n  const cartItems = useSelector(state => state.dataCart.items);\n  const cartChange = useSelector(state => state.dataCart.changed);\n  const dispatchAdd = useDispatch();\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await fetch('https://react-test-aefc2-default-rtdb.firebaseio.com/cart.json');\n\n      if (!response.ok) {\n        throw new Error('fetching data failed');\n      }\n\n      const data = await response.json();\n      dispatchAdd(dataCartActions.replaceCartItem({\n        items: data || []\n      }));\n      console.log(data);\n    };\n\n    fetchData().catch(error => console.log(error.message));\n  }, [dispatchAdd]);\n  useEffect(() => {\n    console.log(send);\n\n    if (send) {\n      send = false;\n      return;\n    }\n\n    const fetchData = async () => {\n      console.log(send);\n      dispatchAdd(showCartActions.showNotification({\n        status: 'pending',\n        title: 'sending...',\n        message: 'sending cart data'\n      }));\n      const response = await fetch('https://react-test-aefc2-default-rtdb.firebaseio.com/cart.json', {\n        method: 'PUT',\n        body: JSON.stringify(cartItems),\n        headers: {\n          'content-type': 'application/json'\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('something went wrong');\n      }\n\n      const data = await response.json();\n      console.log(data);\n      dispatchAdd(showCartActions.showNotification({\n        status: 'success',\n        title: 'Success...',\n        message: 'sending cart data successfully'\n      }));\n    };\n\n    if (!cartChange) return;\n    fetchData().catch(error => {\n      dispatchAdd(showCartActions.showNotification({\n        status: 'error',\n        title: 'Error...',\n        message: 'sending cart data failed'\n      }));\n      console.log(error.message);\n    });\n  }, [cartItems, dispatchAdd, cartChange]);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [showNotification && /*#__PURE__*/_jsxDEV(Notification, {\n      status: showNotification.status,\n      title: showNotification.title,\n      message: showNotification.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      children: [showCart && /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(Products, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"gxxqXitB4DtnL0dvPxn6oZqE6gQ=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Cart","React","useEffect","Layout","Products","useDispatch","useSelector","Notification","showCartActions","dataCartActions","send","App","showCart","state","showNotification","notification","cartItems","dataCart","items","cartChange","changed","dispatchAdd","fetchData","response","fetch","ok","Error","data","json","replaceCartItem","console","log","catch","error","message","status","title","method","body","JSON","stringify","headers"],"sources":["E:/Ahmed/web/github/React-redux/src/App.js"],"sourcesContent":["import Cart from './components/Cart/Cart';\nimport React from 'react';\nimport { useEffect } from 'react';\nimport Layout from './components/Layout/Layout';\nimport Products from './components/Shop/Products';\nimport {useDispatch, useSelector} from 'react-redux'\nimport Notification from './components/UI/Notification';\nimport {showCartActions} from './components/store/showCart-Slice'\nimport {dataCartActions} from './components/store/cartData-Slice'\n\nlet send = true\nfunction App() {\n   const showCart = useSelector(state => state.showCart.showCart)\n   const showNotification = useSelector(state => state.showCart.notification)\n   const cartItems = useSelector(state => state.dataCart.items)\n   const cartChange = useSelector(state => state.dataCart.changed)\n   const dispatchAdd = useDispatch()\n   \n   useEffect(() => {\n    const fetchData= async () => {\n      const response = await fetch('https://react-test-aefc2-default-rtdb.firebaseio.com/cart.json')\n      if(!response.ok){\n        throw new Error('fetching data failed')\n      }\n      const data = await response.json();\n      dispatchAdd(dataCartActions.replaceCartItem({\n        items:data || []\n      }))\n      console.log(data)\n    }\n\n    fetchData().catch(error => console.log(error.message))\n  },[dispatchAdd])\n   useEffect(()=>{\n     console.log(send)\n     if(send){\n       send =false;     \n       return;\n     }\n     \n     const fetchData = async() => {\n       console.log(send)\n       dispatchAdd(showCartActions.showNotification({\n         status:'pending',\n         title: 'sending...',\n         message: 'sending cart data'\n       }))\n       const response =await fetch('https://react-test-aefc2-default-rtdb.firebaseio.com/cart.json',{\n         method:'PUT',\n         body:JSON.stringify(cartItems),\n         headers:{'content-type': 'application/json'}\n       })\n       if(!response.ok){\n         throw new Error('something went wrong')\n       }\n       const data = await response.json()\n       console.log(data)\n       dispatchAdd(showCartActions.showNotification({\n         status:'success',\n         title: 'Success...',\n         message: 'sending cart data successfully'\n       }))\n     }\n     \n     if(!cartChange)\n     return;\n     \n     fetchData().catch(error => {\n       \n       dispatchAdd(showCartActions.showNotification({\n         status:'error',\n         title: 'Error...',\n         message: 'sending cart data failed'\n       }))\n       console.log(error.message)\n     });\n   },[cartItems, dispatchAdd,cartChange])\n\n  \n\n  return (\n    <React.Fragment>\n      {showNotification && <Notification status ={showNotification.status} title={showNotification.title} message={showNotification.message}/>}\n      <Layout>\n      {showCart && <Cart />}\n      <Products />\n    </Layout>\n    </React.Fragment>\n    \n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}